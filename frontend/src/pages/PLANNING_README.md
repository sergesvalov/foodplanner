# Planning Page & Auto-Distribution Logic

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (`PlanningPage.jsx`) –∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–ª—é–¥.

## –û–±–∑–æ—Ä
–°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ü–∏–π –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Ö –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏.

### –†–µ–∂–∏–º—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
1.  **Browse (–í—ã–±–æ—Ä)**: –ö–∞—Ç–∞–ª–æ–≥ —Ä–µ—Ü–µ–ø—Ç–æ–≤. –ú–æ–∂–Ω–æ —Å–∫—Ä—ã–≤–∞—Ç—å/–∑–∞–∫—Ä–µ–ø–ª—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã.
2.  **Summary (–ü–æ—Ä—Ü–∏–∏)**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ä—Ü–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –±–ª—é–¥.
3.  **Days (–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ)**: –ö–∞–Ω–±–∞–Ω-–¥–æ—Å–∫–∞ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏ (–ü–Ω-–í—Å).

---

## –ê–ª–≥–æ—Ä–∏—Ç–º –ê–≤—Ç–æ-—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (`autoDistribute`)

–ê–ª–≥–æ—Ä–∏—Ç–º –ø—ã—Ç–∞–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–ª–æ–∂–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ü–∏–∏ –ø–æ —Å–ª–æ—Ç–∞–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, —É—á–∏—Ç—ã–≤–∞—è –ø—Ä–∞–≤–∏–ª–∞ "–°–µ–º–µ–π–Ω–æ–≥–æ —É–∂–∏–Ω–∞", –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –ª–æ–≥–∏–∫—É –æ—Å—Ç–∞—Ç–∫–æ–≤.

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
*   **Consumers (–ï–¥–æ–∫–∏)**: –†–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (–∏–∑ `familyMembers`) –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ, –µ—Å–ª–∏ —Å–µ–º—å—è –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞.
*   **Slot (–°–ª–æ—Ç)**: –°–æ—á–µ—Ç–∞–Ω–∏–µ `–î–µ–Ω—å + –¢–∏–ø –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–í—Ç–æ—Ä–Ω–∏–∫ - –û–±–µ–¥").
*   **Slot Locking**: –ú–µ—Ö–∞–Ω–∏–∑–º, –∑–∞–ø—Ä–µ—â–∞—é—â–∏–π —Å–º–µ—à–∏–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã –≤ –æ–¥–∏–Ω —Å–ª–æ—Ç (–¥–ª—è –û–±–µ–¥–æ–≤/–£–∂–∏–Ω–æ–≤).

### –ü—Ä–∞–≤–∏–ª–∞ –ø–æ —Ç–∏–ø–∞–º –ø—Ä–∏–µ–º–∞ –ø–∏—â–∏

#### 1. üç≥ –ó–∞–≤—Ç—Ä–∞–∫ (Breakfast)
*   **–õ–æ–≥–∏–∫–∞**: "–£–º–Ω–∞—è –ø—Ä–µ–µ–º—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å" + "–°–º–µ—à–∞–Ω–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ".
*   **–°–º–µ—à–∏–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ**: –í –æ–¥–∏–Ω –∑–∞–≤—Ç—Ä–∞–∫ —Ä–∞–∑–Ω—ã–µ –ª—é–¥–∏ –º–æ–≥—É—Ç –µ—Å—Ç—å —Ä–∞–∑–Ω—ã–µ –±–ª—é–¥–∞ (–ü–∞–ø–∞ ‚Äî –∫–∞—à—É, –ú–∞–º–∞ ‚Äî –±–ª–∏–Ω—ã).
*   **–ü—Ä–µ–µ–º—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å (Continuity)**:
    *   –°–∏—Å—Ç–µ–º–∞ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç, —á—Ç–æ –µ–ª —á–µ–ª–æ–≤–µ–∫ —Ä–∞–Ω–µ–µ.
    *   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –µ–ª *—ç—Ç–æ—Ç* —Ä–µ—Ü–µ–ø—Ç –Ω–∞ –Ω–µ–¥–µ–ª–µ, –∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ —Å—Ç–∞–≤–∏—Ç –µ–≥–æ –∂–µ (—Å–æ–∑–¥–∞–µ—Ç —Å–µ—Ä–∏—é/streak).
    *   –ï—Å–ª–∏ –∏—Å—Ç–æ—Ä–∏–∏ –Ω–µ—Ç, –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π –µ–¥–æ–∫.
*   **–°–ª—É—á–∞–π–Ω–æ—Å—Ç—å**: –î–Ω–∏ –≤—ã–±–∏—Ä–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ (scattered), —á—Ç–æ–±—ã —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—Ç—å –Ω–µ–¥–µ–ª—é.
*   **–ò—Å–∫–ª—é—á–µ–Ω–∏—è**: –†–µ—Ü–µ–ø—Ç—ã —Å –∫–∞—Ç–µ–≥–æ—Ä–∏–µ–π `snack` (–ü–µ—Ä–µ–∫—É—Å/–í–∑—è—Ç—å —Å —Å–æ–±–æ–π) –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –∑–∞–≤—Ç—Ä–∞–∫–æ–≤.

#### 2. üç≤ –û–±–µ–¥ (Lunch) –∏ üçΩÔ∏è –£–∂–∏–Ω (Dinner)
*   **–õ–æ–≥–∏–∫–∞**: "–°—Ç—Ä–æ–≥–∏–π —Å–µ–º–µ–π–Ω—ã–π –ø—Ä–∏–µ–º –ø–∏—â–∏" + "–ü–ª–æ—Ç–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞".
*   **–°—Ç—Ä–æ–≥–æ–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**:
    *   –ï—Å–ª–∏ –≤ —Å–∏—Å—Ç–µ–º–µ 2 –µ–¥–æ–∫–∞, –∞–ª–≥–æ—Ä–∏—Ç–º –∏—â–µ—Ç —Å–ª–æ—Ç, –≥–¥–µ —Å–≤–æ–±–æ–¥–Ω—ã **–æ–±–∞**.
    *   –ù–µ–ª—å–∑—è –ø–æ–ª–æ–∂–∏—Ç—å 1 –ø–æ—Ä—Ü–∏—é, –µ—Å–ª–∏ —Å–µ–º—å—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 2 —á–µ–ª–æ–≤–µ–∫ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ ‚Äî –æ—Å—Ç–∞—Ç–∫–∏).
    *   **–ó–∞–ø—Ä–µ—Ç —Å–º–µ—à–∏–≤–∞–Ω–∏—è**: –ï—Å–ª–∏ –≤ —Å–ª–æ—Ç "–û–±–µ–¥" –ø–æ–ª–æ–∂–µ–Ω "–ë–æ—Ä—â", —Ç—É–¥–∞ —É–∂–µ –Ω–µ–ª—å–∑—è –ø–æ–ª–æ–∂–∏—Ç—å "–°—É–ø-–ø—é—Ä–µ", –¥–∞–∂–µ –µ—Å–ª–∏ –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –º–µ—Å—Ç–∞. –°–ª–æ—Ç –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è (`slotLocks`).
*   **–†–∞–±–æ—Ç–∞ —Å –æ—Å—Ç–∞—Ç–∫–∞–º–∏**:
    *   **–ü–æ–ª–Ω—ã–π –ø—Ä–∏–µ–º –ø–∏—â–∏**: –ï—Å–ª–∏ –ø–æ—Ä—Ü–∏–π —Ö–≤–∞—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö (–æ—Å—Ç–∞—Ç–æ–∫ >= –µ–¥–æ–∫–æ–≤), –∞–ª–≥–æ—Ä–∏—Ç–º –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø–æ–ª–Ω–∏—Ç—å **—Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å** –ø–æ–ª–Ω–æ—Å—Ç—å—é (–û–±–µ–¥ -> –£–∂–∏–Ω).
    *   **–û—Å—Ç–∞—Ç–∫–∏ (Leftovers)**: –ï—Å–ª–∏ –ø–æ—Ä—Ü–∏–π –º–µ–Ω—å—à–µ, —á–µ–º –µ–¥–æ–∫–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Å—Ç–∞–ª–∞—Å—å 1 –ø–æ—Ä—Ü–∏—è –Ω–∞ –¥–≤–æ–∏—Ö), –∞–ª–≥–æ—Ä–∏—Ç–º **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç** –∏—Ö –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ "–Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö" –ø—Ä–∏–µ–º–æ–≤ –ø–∏—â–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –¥–µ–Ω—å.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
*   `plannedMeals`: –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ `{ day, type, recipeId, memberId }`.
*   `memberRecipeStats`: `Map<MemberId, Set<RecipeId>>` ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –¥–ª—è –ª–æ–≥–∏–∫–∏ –ø—Ä–µ–µ–º—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏.
*   `slotLocks`: `Map<"Day-Type", RecipeId>` ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫ —Å–ª–æ—Ç–æ–≤ –¥–ª—è –æ–±–µ–¥–æ–≤/—É–∂–∏–Ω–æ–≤.

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (Pseudocode)
1.  –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–ø–∏—Å–∫–∞ –µ–¥–æ–∫–æ–≤ (`consumers`).
2.  –ü–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤.
3.  –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞:
    *   –í—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π –¥–µ–Ω—å.
    *   –¶–∏–∫–ª –ø–æ–∫–∞ –µ—Å—Ç—å –ø–æ—Ä—Ü–∏–∏ (`remaining > 0`):
        *   –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —Å–ª–æ—Ç–∞ (—Å —É—á–µ—Ç–æ–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –∏ –∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –µ–¥–æ–∫–æ–≤).
        *   **–ï—Å–ª–∏ –ó–∞–≤—Ç—Ä–∞–∫**: –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –µ–¥–æ–∫–æ–≤ –ø–æ "–∏—Å—Ç–æ—Ä–∏–∏" (–µ–ª –ª–∏ —ç—Ç–æ—Ç —Ä–µ—Ü–µ–ø—Ç?). –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ.
        *   **–ï—Å–ª–∏ –û–±–µ–¥/–£–∂–∏–Ω**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –º–µ—Å—Ç –¥–ª—è *–≤—Å–µ–π –≥—Ä—É–ø–ø—ã*. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ.
        *   **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç –¥–Ω—è**:
            *   *–ó–∞–≤—Ç—Ä–∞–∫*: –°–ª—É—á–∞–π–Ω—ã–π –ø—Ä—ã–∂–æ–∫.
            *   *–û–±–µ–¥/–£–∂–∏–Ω (–û—Å—Ç–∞—Ç–∫–∏)*: `currentDay = nextDay`.
            *   *–û–±–µ–¥/–£–∂–∏–Ω (–ü–æ–ª–Ω—ã–π)*: –û—Å—Ç–∞–≤–ª—è–µ–º `currentDay` (–ø–æ–ø—ã—Ç–∫–∞ –∑–∞–ø–æ–ª–Ω–∏—Ç—å —É–∂–∏–Ω).

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
*   `eatersCount`: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –µ–¥–æ–∫–æ–≤ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å `familyMembers`).
*   `mealTypes`: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ (–ó–∞–≤—Ç—Ä–∞–∫, –û–±–µ–¥, –£–∂–∏–Ω).
